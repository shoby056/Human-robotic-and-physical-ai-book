"use strict";(globalThis.webpackChunkphysical_ai_humanoid_robotics_textbook=globalThis.webpackChunkphysical_ai_humanoid_robotics_textbook||[]).push([[533],{768:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>t,metadata:()=>a,toc:()=>l});var i=s(4848),r=s(8453);const t={sidebar_label:"ROS 2 Fundamentals",title:"Chapter 2 - ROS 2 Fundamentals and Node Architecture"},c="Chapter 2 - ROS 2 Fundamentals and Node Architecture",a={id:"chapter2/intro",title:"Chapter 2 - ROS 2 Fundamentals and Node Architecture",description:"Overview",source:"@site/docs/chapter2/intro.md",sourceDirName:"chapter2",slug:"/chapter2/intro",permalink:"/ur/docs/chapter2/intro",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/chapter2/intro.md",tags:[],version:"current",frontMatter:{sidebar_label:"ROS 2 Fundamentals",title:"Chapter 2 - ROS 2 Fundamentals and Node Architecture"},sidebar:"tutorialSidebar",previous:{title:"Introduction",permalink:"/ur/docs/chapter1/intro"},next:{title:"Gazebo Simulation",permalink:"/ur/docs/chapter3/intro"}},o={},l=[{value:"Overview",id:"overview",level:2},{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"ROS 2 Architecture",id:"ros-2-architecture",level:2},{value:"Nodes and Processes",id:"nodes-and-processes",level:3},{value:"Topics and Message Passing",id:"topics-and-message-passing",level:3},{value:"Practical Implementation",id:"practical-implementation",level:2},{value:"Creating a Simple Publisher Node",id:"creating-a-simple-publisher-node",level:3},{value:"Creating a Simple Subscriber Node",id:"creating-a-simple-subscriber-node",level:3},{value:"Advanced ROS 2 Concepts",id:"advanced-ros-2-concepts",level:2},{value:"Services",id:"services",level:3},{value:"Actions",id:"actions",level:3},{value:"Chapter Summary",id:"chapter-summary",level:2},{value:"Exercises",id:"exercises",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"chapter-2---ros-2-fundamentals-and-node-architecture",children:"Chapter 2 - ROS 2 Fundamentals and Node Architecture"}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(n.p,{children:"This chapter delves into the Robot Operating System 2 (ROS 2), focusing on its architecture, node communication, and practical implementation. ROS 2 is essential for developing complex robotic systems and forms the backbone of many Physical AI applications."}),"\n",(0,i.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,i.jsx)(n.p,{children:"By the end of this chapter, you will be able to:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Understand the architecture of ROS 2"}),"\n",(0,i.jsx)(n.li,{children:"Create and manage ROS 2 nodes"}),"\n",(0,i.jsx)(n.li,{children:"Implement communication between nodes using topics, services, and actions"}),"\n",(0,i.jsx)(n.li,{children:"Design distributed robotic systems using ROS 2 concepts"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"ros-2-architecture",children:"ROS 2 Architecture"}),"\n",(0,i.jsx)(n.p,{children:"ROS 2 uses a distributed architecture based on the Data Distribution Service (DDS) for communication. This provides:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Nodes"}),": Processes that perform computation"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Topics"}),": Streams of data that nodes publish and subscribe to"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Services"}),": Synchronous request/response communication"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Actions"}),": Asynchronous goal-oriented communication with feedback"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"nodes-and-processes",children:"Nodes and Processes"}),"\n",(0,i.jsx)(n.p,{children:"A node is an executable that uses ROS 2 to communicate with other nodes. Nodes are lightweight processes that work together to form a complete robotic application. Each node runs within a process and can contain multiple threads."}),"\n",(0,i.jsx)(n.h3,{id:"topics-and-message-passing",children:"Topics and Message Passing"}),"\n",(0,i.jsx)(n.p,{children:"Topics enable asynchronous communication between nodes through a publish-subscribe pattern:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Publishers send data to topics"}),"\n",(0,i.jsx)(n.li,{children:"Subscribers receive data from topics"}),"\n",(0,i.jsx)(n.li,{children:"Multiple publishers and subscribers can exist for the same topic"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"practical-implementation",children:"Practical Implementation"}),"\n",(0,i.jsx)(n.h3,{id:"creating-a-simple-publisher-node",children:"Creating a Simple Publisher Node"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\nclass MinimalPublisher(Node):\n    def __init__(self):\n        super().__init__('minimal_publisher')\n        self.publisher_ = self.create_publisher(String, 'topic', 10)\n        timer_period = 0.5  # seconds\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n        self.i = 0\n\n    def timer_callback(self):\n        msg = String()\n        msg.data = 'Hello World: %d' % self.i\n        self.publisher_.publish(msg)\n        self.get_logger().info('Publishing: \"%s\"' % msg.data)\n        self.i += 1\n"})}),"\n",(0,i.jsx)(n.h3,{id:"creating-a-simple-subscriber-node",children:"Creating a Simple Subscriber Node"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\nclass MinimalSubscriber(Node):\n    def __init__(self):\n        super().__init__('minimal_subscriber')\n        self.subscription = self.create_subscription(\n            String,\n            'topic',\n            self.listener_callback,\n            10)\n        self.subscription  # prevent unused variable warning\n\n    def listener_callback(self, msg):\n        self.get_logger().info('I heard: \"%s\"' % msg.data)\n"})}),"\n",(0,i.jsx)(n.h2,{id:"advanced-ros-2-concepts",children:"Advanced ROS 2 Concepts"}),"\n",(0,i.jsx)(n.h3,{id:"services",children:"Services"}),"\n",(0,i.jsx)(n.p,{children:"Services provide synchronous request/response communication:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from example_interfaces.srv import AddTwoInts\n\nclass MinimalService(Node):\n    def __init__(self):\n        super().__init__('minimal_service')\n        self.srv = self.create_service(AddTwoInts, 'add_two_ints', self.add_two_ints_callback)\n\n    def add_two_ints_callback(self, request, response):\n        response.sum = request.a + request.b\n        self.get_logger().info('Incoming request\\na: %d b: %d' % (request.a, request.b))\n        return response\n"})}),"\n",(0,i.jsx)(n.h3,{id:"actions",children:"Actions"}),"\n",(0,i.jsx)(n.p,{children:"Actions are used for long-running tasks with feedback:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.action import ActionServer\nfrom rclpy.node import Node\n\nfrom example_interfaces.action import Fibonacci\n\nclass FibonacciActionServer(Node):\n    def __init__(self):\n        super().__init__('fibonacci_action_server')\n        self._action_server = ActionServer(\n            self,\n            Fibonacci,\n            'fibonacci',\n            self.execute_callback)\n\n    def execute_callback(self, goal_handle):\n        self.get_logger().info('Executing goal...')\n        feedback_msg = Fibonacci.Feedback()\n        feedback_msg.sequence = [0, 1]\n\n        for i in range(1, goal_handle.request.order):\n            feedback_msg.sequence.append(\n                feedback_msg.sequence[i] + feedback_msg.sequence[i-1])\n            self.get_logger().info('Feedback: {feedback_msg.sequence}')\n            goal_handle.publish_feedback(feedback_msg)\n\n        goal_handle.succeed()\n        result = Fibonacci.Result()\n        result.sequence = feedback_msg.sequence\n        return result\n"})}),"\n",(0,i.jsx)(n.h2,{id:"chapter-summary",children:"Chapter Summary"}),"\n",(0,i.jsx)(n.p,{children:"This chapter covered the fundamentals of ROS 2, including its architecture, node communication patterns, and practical implementation examples. Understanding these concepts is crucial for developing complex robotic systems."}),"\n",(0,i.jsx)(n.h2,{id:"exercises",children:"Exercises"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Create a ROS 2 package with a publisher and subscriber node."}),"\n",(0,i.jsx)(n.li,{children:"Implement a service that performs a mathematical operation."}),"\n",(0,i.jsx)(n.li,{children:"Design an action server that controls a robot's movement."}),"\n",(0,i.jsx)(n.li,{children:"Research different DDS implementations supported by ROS 2."}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>a});var i=s(6540);const r={},t=i.createContext(r);function c(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);